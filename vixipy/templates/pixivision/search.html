{% extends "layouts/default.html" %}
{% set term = request.args["q"] %}
{% set title = _('Results for "%(term)s"', term=term) + " | " + _("pixivision") %}

{% from "pixivision/entry.html" import pxvs_entry %}


{% block content %}
<main id="pixivision">
    <form action="/pixivision/s">
        <div class="searchbox">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M15.461 10.615c0-1.334-.474-2.475-1.422-3.423-.948-.949-2.09-1.423-3.424-1.423s-2.475.474-3.423 1.423c-.949.948-1.423 2.09-1.423 3.423 0 1.335.474 2.476 1.423 3.424.948.948 2.09 1.422 3.423 1.422 1.335 0 2.476-.474 3.424-1.422s1.422-2.09 1.422-3.424zm5.539 9c0 .375-.137.7-.411.974a1.33 1.33 0 01-.974.411c-.389 0-.714-.137-.973-.411l-3.71-3.7a7.407 7.407 0 01-4.317 1.342c-1.03 0-2.017-.2-2.958-.6a7.613 7.613 0 01-2.434-1.623A7.614 7.614 0 013.6 13.574c-.4-.941-.6-1.927-.6-2.959 0-1.03.2-2.017.6-2.958.4-.941.941-1.753 1.623-2.434A7.614 7.614 0 017.657 3.6c.941-.4 1.927-.6 2.958-.6 1.032 0 2.018.2 2.959.6.941.4 1.752.941 2.434 1.623a7.613 7.613 0 011.622 2.434c.4.941.6 1.927.6 2.958a7.407 7.407 0 01-1.34 4.316l3.71 3.71c.267.268.4.592.4.974z" />
            </svg>
            <input type="text" name="q" placeholder="{{_('Search pixivision...')}}" value="{{term}}">
        </div>
    </form>

    <h1>{{_('Results for "%(term)s"', term=term)}}</h1>

    <div class="articles">
        {% for x in data %}
        {{pxvs_entry(x)}}
        {% endfor %}
    </div>

    {% if pg[0] or pg[1] %}
    <div class="paginator">
        {%- set page = request.args.get("p", 1)|int -%}
        <a {% if pg[0] %}href="{{url_for('pixivision.search', q=term, p=page-1)}}" {% endif %}>
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                <path
                    d="m432-480 156 156q11 11 11 28t-11 28q-11 11-28 11t-28-11L348-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 28-11t28 11q11 11 11 28t-11 28L432-480Z" />
            </svg>
        </a>
        <span>{{_("Page %(page)d", page=page)}}</span>
        <a {% if pg[1] %}href="{{url_for('pixivision.search', q=term, p=page+1)}}" {% endif %}>
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                <path
                    d="M504-480 348-636q-11-11-11-28t11-28q11-11 28-11t28 11l184 184q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L404-268q-11 11-28 11t-28-11q-11-11-11-28t11-28l156-156Z" />
            </svg>
        </a>
    </div>
    {% endif %}
</main>
{% endblock %}