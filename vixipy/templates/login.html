<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{_("Sign in")}} | Vixipy</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/jquery-3.7.1.min.js"></script>
    <script src="/static/htmx.min.js"></script>
    <script src="/static/js/common.js"></script>
</head>

<body hx-swap="innerHTML" hx-boost="true" hx-indicator="#loading">
    <input type="hidden" id="illust_id" value="{{id}}">
    <div id="loading"></div>
    <img class="bg-wrapper" src="{{bg}}">
    <div id="login-wrapper">
        <main>
            <input type="checkbox" id="help-toggle">
            <div class="sign-in-help">
                <label id="back" for="help-toggle">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M15.913 16.586a2 2 0 01-2.829 2.828L5.67 12l7.414-7.414a2 2 0 012.829 2.828L11.327 12l4.586 4.586z"
                            fill="currentColor" />
                    </svg> Back</label>
                <h3>{{_("How do I sign in?")}}</h3>
                <p>{{_("To sign in with your pixiv account, you will need your <code>PHPSESSID</code> cookie, which can be found by opening your browser's developer tools:")}}</p>
                <h4>{{_("For Firefox based browsers:")}}</h4>
                <ul>
                    <li>{{_("Go to <a href='%(pixiv)s'>pixiv</a> and login/register if not already.", pixiv="https://www.pixiv.net")}}</li>
                    <li>{{_("Press CTRL+SHIFT+I to open the developer tools")}}</li>
                    <li>{{_("Go to the Storage tab and then Cookies and then www.pixiv.net")}}</li>
                    <li>{{_("Find the cookie named <code>PHPSESSID</code> and copy the contents.")}}</li>
                </ul>
                <h4>{{_("For Chromium based browsers:")}}</h4>
                <ul>
                    <li>{{_("Go to <a href='%(pixiv)s'>pixiv</a> and login/register if not already.", pixiv="https://www.pixiv.net")}}</li>
                    <li>{{_("Press CTRL+SHIFT+I to open the developer tools")}}</li>
                    <li>{{_("Go to the Application tab, on the left side, click Cookies then www.pixiv.net")}}</li>
                    <li>{{_("Find the cookie named <code>PHPSESSID</code> and copy the contents.")}}</li>
                </ul>
                <p>{{_("After obtaining the token, you can paste it in here and login. Note: logging out of that session will destroy the token as well!")}}</p>
                <h3>{{_("Is it safe for me to log in here?")}}</h3>
                <p>{{_("Vixipy will never steal session tokens or personal information. Your token is stored in your browser as a cookie for 6 months and not the server. The chances of your account getting in trouble or suspended are highly unlikely as well.")}}</p>
                <h3>{{_("What are the advantages of logging in?")}}</h3>
                <p>{{_("Logging in to your pixiv account allows for personalized recommendations, work interaction (like, bookmark, etc.) and following users. It also allows accessing login only and R-18 (if allowed by instance) works.")}}</p>
            </div>
            <div class="sign-in-main">
                <div class="sign-in-body">
                    <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px"
                        fill="#e8eaed">
                        <path
                            d="M234.97-258.15q56.95-40.16 116.53-62.62T480-343.23q68.92 0 128.7 22.46 59.79 22.46 116.74 62.62 41.51-47.36 62.91-102.79 21.39-55.44 21.39-119.06 0-138.69-95.52-234.22-95.53-95.52-234.22-95.52t-234.22 95.52Q150.26-618.69 150.26-480q0 63.62 21.6 119.06 21.6 55.43 63.11 102.79Zm244.89-196.72q-54.22 0-91.3-37.22-37.07-37.22-37.07-91.44 0-54.21 37.22-91.29 37.21-37.08 91.43-37.08 54.22 0 91.3 37.22 37.07 37.22 37.07 91.44 0 54.21-37.22 91.29-37.21 37.08-91.43 37.08Zm.45 354.87q-79.05 0-148.33-29.77-69.27-29.77-120.85-81.41-51.59-51.64-81.36-120.7Q100-400.94 100-480.05q0-79.1 29.77-148.12 29.77-69.01 81.41-120.65t120.7-81.41Q400.94-860 480.05-860q79.1 0 148.12 29.77 69.01 29.77 120.65 81.41t81.41 120.68Q860-559.11 860-480.31q0 79.05-29.77 148.33-29.77 69.27-81.41 120.85-51.64 51.59-120.68 81.36Q559.11-100 480.31-100Zm-.31-50.26q55.23 0 108.14-17.62 52.91-17.63 97.86-54.48-44.95-33.54-97.04-52.08T480-292.98q-56.87 0-109.15 18.35-52.29 18.35-96.59 52.27 44.69 36.85 97.6 54.48 52.91 17.62 108.14 17.62Zm.04-354.87q33.86 0 56.04-22.21 22.18-22.22 22.18-56.08t-22.22-56.04q-22.21-22.18-56.08-22.18-33.86 0-56.04 22.21-22.18 22.22-22.18 56.08t22.22 56.04q22.21 22.18 56.08 22.18Zm-.04-78.25Zm0 361.76Z" />
                    </svg>
                    <h1>{{_("Sign in")}}</h1>
                    <span>{{_("with your pixiv account.")}} <label id="help"
                            for="help-toggle">{{_("Help")}}</label></span>
                </div>
                <form action="/self/login" method="post">
                    <input type="hidden" name="return_to" value="{{request.args.get('return_to', '/')}}">
                    <input type="password" placeholder="{{_('Token')}}" required name="token">
                    {% with messages = get_flashed_messages() %}
                    {% if messages %}
                    {% for x in messages %}
                    <div class="error">{{x}}</div>
                    {% endfor %}
                    {% endif %}
                    {% endwith %}
                    <div class="actions">
                        <a href="/" class="label-button smaller">{{_("Return")}}</a>
                        <button class="button smaller primary" type="submit">{{_("Sign in")}}</button>
                    </div>
                </form>
            </div>
        </main>
    </div>
    <script>
        getSchemeFromArtwork(document.getElementById("illust_id").value)
    </script>
</body>

</html>