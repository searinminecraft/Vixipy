{% extends "layouts/default.html" %}
{% block title %}{{ _("Home") }}{% endblock %}
{% set mode = request.args.get("mode", "all") %}
{% block content %}

{% if g.isAuthorized %}

{% if g.get('omittedByFilter') %}
<i>{{ _("Some entries have been hidden due to filters") }}</i>
{% endif %}

<div class="container">
  <div class="taglist scroll">
    {% for tag in data.tags %}
    <span>
      <a href="/tag/{{tag.tag}}">#{{ tag.tag }}</a>
      {{ tag.tag_translation }}
    </span>
    {% endfor %}
  </div>
</div>

<div class="component-header">
  <ul class="tab-navigation">
    <li class="active"><a href="">{{ _("Illustrations") }}</a></li>
    <li><a href="/manga">{{ _("Manga") }}</a></li>
  </ul>
  <div class="choice-toggle">
    <a {% if mode=="all" %}class="active"{% endif %} href="?mode=all">{{ _("All") }}</a>
    <a {% if mode=="r18" %}class="active"{% endif %} href="?mode=r18">R-18</a>
  </div>
</div>

<div class="container">
	<h2>{{ _("Latest from following") }}</h2>
	<div class="artwork-scroll-container">
		{% if data.newestFromFollowing | length > 0 %}
		{% for d in data.newestFromFollowing %}
		{% include "components/artwork-prev.html" %}
		{% endfor %}
		{% else %}
		<p>{{ _("Nothing to show!") }}</p>
		{% endif %}
	</div>
</div>

<div class="container">
	<h2>{{ _("Recommended works") }}</h2>
	<div class="artwork-container">
		{% if data.recommended | length > 0 %}
		{% for d in data.recommended %}
		{% include "components/artwork-prev.html" %}
		{% endfor %}
		{% else %}
		<p>{{ _("Nothing to show!") }}</p>
		{% endif %}
	</div>
</div>

<div class="container">
	<h2>{{ _("Today's Rankings") }}</h2>
	<div class="artwork-scroll-container">
		{% for d in rankingData %}
		{% include "components/artwork-prev.html" %}
		{% endfor %}
	</div>
</div>


<div class="container">
  <h2>{{ _("Popular tags") }}</h2>
  <div class="artwork-scroll-container">
    {% for d in data.trendingTags %}
    {% include "components/trending-tag.html" %}
    {% endfor %}
  </div>
</div>

<div class="container">
	<h2>{{ _("Recommended users") }}</h2>
	<div class="artwork-scroll-container">
		{% for u in data.recommendedUsers%}
		{% include "components/recommendedUser.html" %}
		{% endfor %}
	</div>
</div>

<div class="container">
  <h2>{{ _("Newest articles in pixivision") }}</h2>
  <div class="artwork-scroll-container">
    {% for d in data.pixivisionArticles %}
    {% include "components/pixivision-card.html" %}
    {% endfor %}
  </div>
</div>

{% for t in data.recommendByTag %}
<div class="container">
	<h2>{{ _("Recommended artworks with tag") }} <a href="/tag/{{ t.name }}">#{{ t.name }}</a></h2>
	<div class="artwork-container">
		{% for d in t.artworks %}
		{% include "components/artwork-prev.html" %}
		{% else %}
		<p>{{_("Nothing in here!")}}</p>
		{% endfor %}
	</div>
</div>
{% endfor %}

{% else %}

<div class="container">
	<div class="component-header">
		<h2>{{ _("Today's Rankings") }}</h2>
		<a href="/rankings/">{{ _("View all") }}</a>
	</div>
	<div class="artwork-container">
		{% for d in data %}
		{% include "components/artwork-prev.html" %}
		{% endfor %}
	</div>
</div>


{% endif %}
{% endblock %}
