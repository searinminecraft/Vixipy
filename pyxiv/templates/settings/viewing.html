{% extends "settings/settingsMain.html" %}
{% set currentSection = "display" %}


{% block settingsPage %}

<h1>{{ _("Display Settings") }}</h1>
{% if g.isAuthorized %}
<p>{{ _("<b>NOTE:</b> These settings will not apply to your pixiv account.") }}<p>
{% endif %}

{% if not config["authless"] or (g.isAuthorized and config["authless"]) %}
{% if not g.userState.xRestrictEnabled or not g.userState.r18GEnabled or g.userState.hideAiWorks %}
{% if g.isAuthorized %}
<p><i>{{ _("Some of these settings are enforced by your pixiv account's settings.") }}</i></p>
{% else %}
<p><i>{{ _("Some of these settings are enforced by the instance's associated pixiv account.") }}</i></p>
{% endif %}
{% endif %}
{% endif %}


<form action="/settings/setDisplayPrefs" method="POST">
	{% set hideAIPref = (request.cookies.get('PyXivHideAI') == '1') %}
	{% set hideR18Pref = (request.cookies.get('PyXivHideR18') == '1') %}
	{% set hideR18GPref = (request.cookies.get('PyXivHideR18G') == '1')%}
  {% set hideSensitivePref = (request.cookies.get('VixipyHideSensitive') == '1') %}

	{% if not config["authless"] or (g.isAuthorized and config["authless"]) %}
	<div class="toggle-switch">
		<label for="hideAI">{{ _("Hide AI-generated works") }}</label>
		<input type="checkbox" name="hideAI" id="hideAI" {% if g.userState.hideAiWorks %}disabled checked{% else %}{% if hideAIPref %}checked{% endif %}{% endif %}>
	</div>
	<div class="toggle-switch">
		<label for="hideR18">{{ _("Hide explicit content (R-18)") }}</label>
		<input type="checkbox" name="hideR18" id="hideR18" {% if not g.userState.xRestrictEnabled %}disabled checked{% else %}{% if hideR18Pref %}checked{% endif %}{% endif %}>
	</div>
	<div class="toggle-switch">
		<label for="hideR18G">{{ _("Hide ero-guro (R-18G) content") }}</label>
		<input type="checkbox" name="hideR18G" id="hideR18G" {% if not g.userState.r18GEnabled%}disabled checked{% else %}{% if hideR18GPref %}checked{% endif %}{% endif %}>
	</div>
  <div class="toggle-switch">
		<label for="hideSensitive">{{ _("Hide potentially sensitive content") }}</label>
    <input type="checkbox" name="hideSensitive" id="hideSensitive" {% if hideSensitivePref %}checked{% endif %}>
	</div>

	{% else %}
	<div class="toggle-switch">
		<label for="hideAI">{{ _("Hide AI-generated works") }}</label>
		<input type="checkbox" name="hideAI" id="hideAI" {% if hideAIPref %}checked{% endif %}>
	</div>
	{% endif %}

	<div class="toggle-switch">
		<label>{{ _("Hide ads (Vixipy has no ads)") }}</label>
		<input type="checkbox" disabled checked>
	</div>
	<br>
	<button type="submit" class="button">{{ _("Save preferences") }}</button>
</form>

{% endblock %}
